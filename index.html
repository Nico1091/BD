<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conexión MySQL</title>
</head>
<body>
    <h1>Usuarios desde la base de datos</h1>
    
    <!-- Botón para cargar datos -->
    <button id="cargarUsuarios">Cargar Usuarios</button>
    
    <!-- Lista donde se mostrarán los usuarios -->
    <ul id="usuarios"></ul>

    <!-- Mensaje en caso de no haber datos -->
    <p id="mensaje" style="display:none;">No hay datos disponibles.</p>

    <!-- Botón para obtener el nombre de la base de datos -->
    <button id="obtenerNombreBD">Obtener Nombre de la Base de Datos</button>
    
    <!-- Contenedor para mostrar el nombre de la base de datos -->
    <p id="nombreBaseDatos"></p>

    <script>
        // Función para cargar los usuarios desde el servidor
        function cargarUsuarios() {
            fetch('http://localhost:3000/usuarios')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Error al cargar usuarios');
                    }
                    return response.json();
                })
                .then(data => {
                    const usuariosList = document.getElementById('usuarios');
                    const mensaje = document.getElementById('mensaje');

                    // Limpiar la lista antes de agregar nuevos elementos
                    usuariosList.innerHTML = '';

                    if (data.length === 0) {
                        mensaje.style.display = 'block';
                    } else {
                        mensaje.style.display = 'none';

                        data.forEach(usuario => {
                            const listItem = document.createElement('li');
                            listItem.textContent = `Nombre: ${usuario.nombre}, Dirección: ${usuario.direccion}`;
                            usuariosList.appendChild(listItem);
                        });
                    }
                })
                .catch(error => console.log('Error de datos', error));
        }

        // Función para obtener el nombre de la base de datos desde el servidor
        function obtenerNombreBD() {
            fetch('http://localhost:3000/bancodb')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Error al obtener el nombre de la base de datos');
                    }
                    return response.json();
                })
                .then(data => {
                    document.getElementById('nombreBaseDatos').textContent = `Nombre de la Base de Datos: ${data.nombre}`;
                })
                .catch(error => console.log('Error al obtener el nombre de la base de datos', error));
        }

        // Agregar evento al botón para cargar los usuarios
        document.getElementById('cargarUsuarios').addEventListener('click', cargarUsuarios);

        // Agregar evento al botón para obtener el nombre de la base de datos
        document.getElementById('obtenerNombreBD').addEventListener('click', obtenerNombreBD);
    </script>
</body>
</html>
